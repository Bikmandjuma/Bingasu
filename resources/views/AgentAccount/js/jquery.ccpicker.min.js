!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?e(require("jquery")):e(jQuery)}(function(e,t,c,o){"use strict";var i="ccPicker",n={countryCode:"LT",dialCodeFieldName:"phoneCode",countryCodeFieldName:"countryCode",dataUrl:"data.json",countryFilter:!0,searchPlaceHolder:"Search"};function r(t,c){var o=this;return this.element=t,this.options=e.extend({},n,c),this._defaults=n,this._name=i,this._list={},this._filter={},this._ccData={},this._ccPicker={},this._ccDialCodeTrackerField={},this._ccCountryCodeTrackerField={},this._ccSelectedCountry={},this.init(),{setCountryByPhoneCode:function(t){var c=o.findCountryByPhoneCode(o,t);o._ccPicker.html(o.createCountryListItem(c.code,c.phoneCode)),o._ccDialCodeTrackerField.val(c.phoneCode),o._ccCountryCodeTrackerField.val(c.code),o._ccSelectedCountry={code:c.code,phoneCode:c.phoneCode},e(o.element).trigger("countrySelect",c)},setCountryByCode:function(t){var c=o.findCountryByCountryCode(o,t);o._ccPicker.html(o.createCountryListItem(c.code,c.phoneCode)),o._ccDialCodeTrackerField.val(c.phoneCode),o._ccCountryCodeTrackerField.val(c.code),o._ccSelectedCountry={code:c.code,phoneCode:c.phoneCode},e(o.element).trigger("countrySelect",c)},disable:function(){e(o.element).prop("disabled",!0),o._ccPicker.off("click"),o._ccPicker.css("cursor","default")},enable:function(){e(o.element).prop("disabled",!1),o._ccPicker.off("click"),o._ccPicker.on("click",function(t){e.isEmptyObject(o._list)?o.createCountryList(o):o.destroyCountryList(o),t.stopPropagation()}),o._ccPicker.css("cursor","pointer")}}}e.extend(r.prototype,{init:function(){var t=this;this.loadCountryData(t);var c=this.findCountryByCountryCode(t,this.options.countryCode);this._ccPicker=e('<div class="cc-picker cc-picker-code-select-enabled">').insertBefore(this.element),this._ccDialCodeTrackerField=e("<input>").attr({type:"hidden",id:this.element.id+"_"+this.options.dialCodeFieldName,name:this.element.name+"_"+this.options.dialCodeFieldName,value:c.phoneCode}).insertAfter(this.element),this._ccCountryCodeTrackerField=e("<input>").attr({type:"hidden",id:this.element.id+"_"+this.options.countryCodeFieldName,name:this.element.name+"_"+this.options.countryCodeFieldName,value:c.code}).insertAfter(this.element),this._ccPicker.prepend(this.createCountryListItem(this.options.countryCode.toLowerCase(),c.phoneCode)),this._ccPicker.on("click",function(c){e.isEmptyObject(t._list)?t.createCountryList(t):t.destroyCountryList(t),c.stopPropagation()}),e("body").on("click",function(){e.isEmptyObject(t._list)||t.destroyCountryList(t)})},loadCountryData:function(t){e.ajax({dataType:"json",url:t.options.dataUrl,type:"get",async:!1,success:function(e){t._ccData=e}})},findCountryByPhoneCode:function(t,c){return e.grep(t._ccData,function(e){return e.phoneCode.toUpperCase()===c.toUpperCase()})[0]},findCountryByCountryCode:function(t,c){return e.grep(t._ccData,function(e){return e.code.toUpperCase()===c.toUpperCase()})[0]},createCountryList:function(t){var c="auto"===t._ccPicker.css("z-index")?0:Number(t._ccPicker.css("z-index"))+10;t._list=e("<ul/>",{class:"cc-picker-code-list"}).appendTo("body"),t._list.css({top:t._ccPicker.offset().top+t._ccPicker.outerHeight()+(!0===t.options.countryFilter?25:0),left:t._ccPicker.offset().left,"z-index":c}),e.each(t._ccData,function(c,o){var i=e("<li>",{text:o.countryName}).appendTo(t._list);e(i).data("countryItem",o),e(i).prepend(t.createCountryListItem(o.code,o.phoneCode)),e(i).on("click",function(){t.selectCountry(t,e(this)),t.destroyCountryList(t)}),o.phoneCode===t._ccSelectedCountry.phoneCode&&e(i).addClass("cc-picker-selected-country")}),t.options.countryFilter&&(t._filter=e("<input/>",{class:"cc-picker-code-filter",placeholder:t.options.searchPlaceHolder}).insertBefore(t._list),t._filter.css({top:t._ccPicker.offset().top+t._ccPicker.outerHeight(),left:t._ccPicker.offset().left,"z-index":c}),t._filter.on("click",function(e){e.stopPropagation()}),t._filter.on("keyup",function(t){var c=e(this).val();e('.cc-picker-code-list li:not(:ccContains("'+c+'"))').hide(),e('.cc-picker-code-list li:ccContains("'+c+'")').show()}))},destroyCountryList:function(e){e._list.remove(),e._list={},e.options.countryFilter&&(e._filter.remove(),e._filter={})},selectCountry:function(t,c){var o=e(c).data("countryItem");this._ccSelectedCountry=o,t._ccPicker.html(t.createCountryListItem(o.code,o.phoneCode)),t._ccCountryCodeTrackerField.val(o.code),t._ccDialCodeTrackerField.val(o.phoneCode),e(t.element).trigger("countrySelect",o)},createCountryListItem:function(e,t){return'<div class="cc-picker-flag '+e.toLowerCase()+'"></div><span class="cc-picker-code">'+t+"</span> "}}),e.extend(e.expr[":"],{ccContains:function(t,c,o){return e(t).text().toUpperCase().indexOf(o[3].toUpperCase())>=0}}),e.fn.CcPicker=function(t){if("string"==typeof arguments[0]){var c,n=arguments[0],s=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!e.data(this,"plugin_"+i)||"function"!=typeof e.data(this,"plugin_"+i)[n])throw new Error("Method "+n+" does not exist on jQuery."+i);c=e.data(this,"plugin_"+i)[n].apply(this,s)}),c!==o?c:this}if("object"==typeof t||!t)return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new r(this,t))})}});
